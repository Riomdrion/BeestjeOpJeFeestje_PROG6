@model BeestjeOpJeFeestje_PROG6.ViewModel.BookingWizardVM

<h2>Booking Wizard</h2>

<!-- Step 1 Modal: Select Date -->
<div class="modal" id="step1Modal" tabindex="-1" aria-labelledby="step1ModalLabel">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="step1ModalLabel">Step 1: Select Date</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <label for="eventDate" class="form-label">Event Date</label>
                    <input asp-for="Booking.Date" type="date" class="form-control" id="eventDate" required>
                </div>
                <button type="button" class="btn btn-primary" onclick="saveDate()">Next</button>
            </div>
        </div>
    </div>
</div>

<!-- Step 2 Modal: Select Animals -->
<div class="modal" id="step2Modal" tabindex="-1" aria-labelledby="step2ModalLabel">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="step2ModalLabel">Step 2: Select Animals</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <label class="form-label">Available Animals</label>
                    @foreach (var animal in Model.AvailableAnimals)
                    {
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="animal-@animal.Id" value="@animal.Name">
                            <label class="form-check-label" for="animal-@animal.Id">@animal.Name</label>
                        </div>
                    }
                </div>
                <button type="button" class="btn btn-primary" onclick="saveAnimals()">Next</button>
            </div>
        </div>
    </div>
</div>

<!-- Step 3 Modal: Enter Contact Info -->
<div class="modal" id="step3Modal" tabindex="-1" aria-labelledby="step3ModalLabel">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="step3ModalLabel">Step 3: Enter Contact Info</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <label for="email" class="form-label">Email</label>
                    <input asp-for="Booking.User.Email" type="email" class="form-control" id="email" required>
                </div>
                <button type="button" class="btn btn-primary" onclick="saveContactInfo()">Next</button>
            </div>
        </div>
    </div>
</div>

<!-- Step 4 Modal: Confirm Booking -->
<div class="modal" id="step4Modal" tabindex="-1" aria-labelledby="step4ModalLabel">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="step4ModalLabel">Step 4: Confirm Booking</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p><strong>Date:</strong> <span id="confirmDate"></span></p>
                <p><strong>Animals:</strong> <span id="confirmAnimals"></span></p>
                <p><strong>Email:</strong> <span id="confirmEmail"></span></p>
                <button type="submit" class="btn btn-success">Confirm Booking</button>
            </div>
        </div>
    </div>
</div>

<!-- Hidden Fields -->
<input asp-for="Booking.Date" type="hidden" id="hiddenDate">
<input asp-for="Booking.Animal" type="hidden" id="hiddenAnimals">
<input asp-for="Booking.User.Email" type="hidden" id="hiddenEmail">


<script>
    document.addEventListener("DOMContentLoaded", function () {
    const step1Modal = new bootstrap.Modal(document.getElementById('step1Modal'));
    step1Modal.show();
});

function saveDate() {
    const dateInput = document.getElementById('eventDate').value;
    if (dateInput) {
        document.getElementById('hiddenDate').value = dateInput;

        const step1Modal = bootstrap.Modal.getInstance(document.getElementById('step1Modal'));
        step1Modal.hide();

        const step2Modal = new bootstrap.Modal(document.getElementById('step2Modal'));
        step2Modal.show();
    } else {
        alert("Please select a date.");
    }
}

function saveAnimals() {
    const selectedAnimals = [];
    document.querySelectorAll('#step2Modal .form-check-input:checked').forEach((checkbox) => {
        selectedAnimals.push(checkbox.value);
    });

    if (selectedAnimals.length > 0) {
        document.getElementById('hiddenAnimals').value = selectedAnimals.join(', ');

        const step2Modal = bootstrap.Modal.getInstance(document.getElementById('step2Modal'));
        step2Modal.hide();

        const step3Modal = new bootstrap.Modal(document.getElementById('step3Modal'));
        step3Modal.show();
    } else {
        alert("Please select at least one animal.");
    }
}

function saveContactInfo() {
    const emailInput = document.getElementById('email').value;
    if (emailInput) {
        document.getElementById('hiddenEmail').value = emailInput;

        const step3Modal = bootstrap.Modal.getInstance(document.getElementById('step3Modal'));
        step3Modal.hide();

        const step4Modal = new bootstrap.Modal(document.getElementById('step4Modal'));
        step4Modal.show();

        document.getElementById('confirmDate').textContent = document.getElementById('hiddenDate').value;
        document.getElementById('confirmAnimals').textContent = document.getElementById('hiddenAnimals').value;
        document.getElementById('confirmEmail').textContent = document.getElementById('hiddenEmail').value;
    } else {
        alert("Please enter your email.");
    }
}
</script>

<!-- Bootstrap CSS and JS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
